<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
  <head>
    <title>SRFI 11: Syntax for receiving multiple values</title>
  </head>

  <body>

<H1>Title</H1>

Syntax for receiving multiple values

<H1>Author</H1>

Lars T Hansen

<H1>Status</H1>
This SRFI is currently in ``draft'' status.  To see an explanation of each status that a SRFI can hold, see <A HREF="http://srfi.schemers.org/srfi-process.html">here</A>.
It will remain in draft status until 1999/11/12, or as amended.
To provide input on this SRFI, please <code><A
HREF="mailto:srfi-11@srfi.schemers.org">mail to
&lt;srfi-11@srfi.schemers.org&gt;</A></code>.  See <A HREF=../srfi-list-subscribe.html>instructions here</A> to subscribe to the list.  You can access previous messages via <A HREF=mail-archive/maillist.html>the archive of the mailing list</A>.
<P><UL>
<LI>Received: 1999/09/10
<LI>Draft: 1998/09/14-1999/11/12
<LI>Revised: 1999/11/01
</UL>

<H1>Abstract</H1>

LET-VALUES, a syntax for receiving multiple values, is introduced.

<H1>Issues</H1>

None.

<H1>Rationale</H1>

LET-VALUES reduces the clutter of the CALL-WITH-VALUES notation for
receiving multiple values.


<H1>Specification</H1>

<dl>
<dt>
(LET-VALUES (&lt;formals&gt; &lt;expression&gt;) &lt;body&gt;)
<br>Syntax
<dd>
<p>&lt;Formals&gt; should be a formal arguments list as for a LAMBDA 
   expression, cf section 4.1.4 of the R5RS.

<p>The &lt;expression&gt; is evaluated in the current environment, the 
   variables of &lt;formals&gt; are bound to fresh locations, the return 
   values of &lt;expression&gt; are stored in the variables, the &lt;body&gt; 
   is evaluated in the extended environment, and the values of the
   last expression of &lt;body&gt; are returned.  The &lt;body&gt; is a 
   &lt;tail body&gt;, cf section 3.5 of the R5RS.

<p>The matching of &lt;formals&gt; to values is as for the matching of 
   &lt;formals&gt; to arguments in a LAMBDA expression, and it is an
   error for &lt;expression&gt; to return a number of values that does
   not match &lt;formals&gt;.

<pre>
             (let-values ((a b c) (values 1 2 3))
               (list a b c))            --&gt; (1 2 3)
             (let-values ((a b . c) (values 1 2 3 4))
               (list a b c))            --&gt; (1 2 (3 4))   
</pre>
</dl>

<H1>Implementation</H1>

The following implementation is written in R5RS Scheme.  It is not
compatible with the IEEE Scheme standard because the IEEE standard does
not contain the high-level macro system.

<p>The implementation assumes that some top-level names defined by the
R5RS are bound to their original values.

<p>
<pre>
(define-syntax let-values
  (syntax-rules ()
    ((let-values (formals e0) e1 e2 ...)
     (call-with-values
      (lambda ()
        e0)
      (lambda formals e1 e2 ...)))))
</pre>

<H1>Copyright</H1>
Copyright (C) Lars T Hansen (1999). All Rights Reserved. 
<p>
This document and translations of it may be copied and furnished to
others, and derivative works that comment on or otherwise explain it
or assist in its implementation may be prepared, copied, published and
distributed, in whole or in part, without restriction of any kind,
provided that the above copyright notice and this paragraph are
included on all such copies and derivative works. However, this
document itself may not be modified in any way, such as by removing
the copyright notice or references to the Scheme Request For
Implementation process or editors, except as needed for the purpose of
developing SRFIs in which case the procedures for copyrights defined
in the SRFI process must be followed, or as required to translate it
into languages other than English.
<p>
The limited permissions granted above are perpetual and will not be
revoked by the authors or their successors or assigns.
<p>
This document and the information contained herein is provided on an
"AS IS" basis and THE AUTHOR AND THE SRFI EDITORS DISCLAIM ALL
WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY
WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY
RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A
PARTICULAR PURPOSE.


    <hr>
    <address>Editor: <a href="mailto:srfi-editors@srfi.schemers.org">Mike Sperber</a></address>
<!-- Created: Tue Sep 29 19:20:08 EDT 1998 -->
<!-- hhmts start -->
Last modified: Sat Nov  6 11:17:12 MET 1999
<!-- hhmts end -->
  </body>
</html>

